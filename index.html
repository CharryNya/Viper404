<!DOCTYPE html>
<html lang="es" class="h-full">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VIPER404</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Orbitron:wght@700;900&display=swap" rel="stylesheet">
<style>
:root {
  --neon-green: #39ff14;
  --neon-green-dim: #1a7a0a;
  --neon-glitch: rgba(57,255,20,0.15);
  --bg-black: #000000;
  --card-bg: #050505;
}

  <article class="post-card neon-border">
  <div class="flex justify-between text-xs neon-text-dim mb-2">
    <span>[VPR-2026-002]</span>
    <span>2026.01.13 // 23:10 UTC</span>
  </div>

  <h2 class="font-bold text-lg neon-text mb-2">
    NUEVO REGISTRO
  </h2>

  <p class="text-sm neon-text mb-2">
    Texto del nuevo informe.
  </p>

  <p class="text-xs neon-text-dim">
    &gt; Archivo indexado
  </p>
</article>

html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  font-family: 'Share Tech Mono', monospace;
  background-color: var(--bg-black);
  color: var(--neon-green);
  overflow-x: hidden;
}

.font-tech { font-family: 'Orbitron', sans-serif; }
.neon-text { 
  color: var(--neon-green);
  text-shadow: 0 0 5px var(--neon-green), 0 0 10px var(--neon-green), 0 0 20px var(--neon-glitch);
}
.neon-text-dim {
  color: var(--neon-green-dim);
  text-shadow: 0 0 4px var(--neon-green-dim);
}
.neon-border {
  border: 1px solid var(--neon-green);
}

/* Scroll personalizado */
* { scrollbar-width: thin; scrollbar-color: var(--neon-green-dim) var(--bg-black); }
*::-webkit-scrollbar { width: 6px; }
*::-webkit-scrollbar-track { background: var(--bg-black); }
*::-webkit-scrollbar-thumb { background-color: var(--neon-green-dim); }

/* Título con efecto glitch */
h1#site-title {
  font-size: 4rem;
  text-align: center;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-weight: 900;
  position: relative;
  animation: glitch-title 2s infinite;
}
@keyframes glitch-title {
  0%,100%{text-shadow:2px 0 var(--neon-green),-2px 0 var(--neon-glitch);}
  20%{text-shadow:-2px 2px var(--neon-green),2px -2px var(--neon-glitch);}
  40%{text-shadow:2px -2px var(--neon-green),-2px 2px var(--neon-glitch);}
  60%{text-shadow:-2px 0 var(--neon-green),2px 2px var(--neon-glitch);}
  80%{text-shadow:2px 0 var(--neon-green),-2px -2px var(--neon-glitch);}
}

/* Subtítulo con flicker aleatorio */
#tagline { text-align:center; margin-top:10px; font-size:1.2rem; animation:flicker 3s infinite; opacity:0.8;}
@keyframes flicker {
  0%,19%,21%,23%,25%,54%,56%,100%{opacity:0.8;}
  20%,22%,24%,55%{opacity:0.3;}
}

/* Contenedor de posts */
.post-card {
  background: var(--card-bg);
  border: 1px solid var(--neon-green);
  border-radius: 12px;
  padding: 20px;
  box-shadow: 0 0 10px var(--neon-glitch);
  transition: transform 0.3s, box-shadow 0.3s;
  position: relative;
  overflow: hidden;
}
.post-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 0 20px var(--neon-green), 0 0 40px var(--neon-glitch);
}
.post-card::before, .post-card::after {
  content:'';
  position:absolute;
  top:0; left:0; width:100%; height:100%;
  background:transparent;
  pointer-events:none;
}
.post-card::before { box-shadow: 2px 0 var(--neon-glitch); animation: glitch-post 2s infinite;}
.post-card::after { box-shadow: -2px 0 var(--neon-glitch); animation: glitch-post 2s infinite reverse;}
@keyframes glitch-post {
  0%,20%,40%,60%,80%,100%{transform:translate(0,0);}
  10%{transform:translate(-2px,1px);}
  30%{transform:translate(2px,-1px);}
  50%{transform:translate(-1px,2px);}
  70%{transform:translate(1px,-2px);}
  90%{transform:translate(-2px,1px);}
}

/* Botones de reacción */
.reaction-btn { color: var(--neon-green-dim); cursor:pointer; transition:all 0.2s; }
.reaction-btn:hover, .reaction-btn.active { color: var(--neon-green); text-shadow:0 0 6px var(--neon-glitch); }

/* Formulario de publicación */
#publish-form {
  max-width:600px;
  margin:30px auto;
  padding:15px;
  border:1px solid var(--neon-green);
  border-radius:10px;
  background:rgba(5,5,5,0.7);
}
#publish-form input, #publish-form textarea, #publish-form button {
  width:100%;
  padding:8px;
  margin-top:10px;
  background:#000;
  border:1px solid var(--neon-green);
  color: var(--neon-green);
  font-family:'Share Tech Mono', monospace;
}
#publish-form button:hover {
  background: var(--neon-green-dim);
  color:#000;
  cursor:pointer;
}
</style>
</head>
<body class="h-full bg-black text-green-400 font-mono overflow-auto">

<div id="app" class="h-full w-full flex flex-col">

<header class="flex-shrink-0 pt-10 pb-8 px-4">
  <div class="text-center">
    <h1 id="site-title" class="font-tech">
      V 
      <svg class="viper-integrated" viewBox="0 0 40 50" fill="none" xmlns="http://www.w3.org/2000/svg" style="width:1em;height:1.25em;margin:0 0.05em;">
      <!-- Small snake emoji-like SVG placed right after the title -->
        <path d="M20 2 C15 2 12 5 12 10 L12 20 C12 22 10 24 8 24 L4 24 L8 28 L12 28 C16 28 18 26 18 22 L18 35 C18 40 15 43 10 45 L14 48 L20 42 L26 48 L30 45 C25 43 22 40 22 35 L22 22 C22 26 24 28 28 28 L32 28 L36 24 L32 24 C30 24 28 22 28 20 L28 10 C28 5 25 2 20 2 Z" fill="currentColor"/>
      <svg class="viper-emoji" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="false" aria-label="serpiente">
        <circle cx="16" cy="12" r="1.5" fill="#000"/>
        <path class="body" d="M2 12c2-6 8-8 14-6 1 .3 2.5 1 3 2 .6 1.2-.2 2.6-1.6 3-1.4.4-2.8-.2-3.6-1.2C12 8 9.8 8 8 9c-1.8 1-2 3-1 4 1 1.4 3.5 2 5 1.6 1.4-.4 2.6-1.4 3.8-1.2" stroke="none" />
        <circle cx="24" cy="12" r="1.5" fill="#000"/>
        <circle class="eye" cx="17.2" cy="8.6" r="0.9" />
        <path class="tongue" d="M19.6 9.2c.4.2.8.6 1 1" stroke="none" />
      </svg>
    </h1>
  </div>
  <p id="tagline" class="text-center mt-4 text-sm md:text-base neon-text-dim tracking-widest">Error: privacy not found</p>
</header>

<main class="flex-1 overflow-auto px-4 pb-10">
  <div id="posts-container" class="max-w-3xl mx-auto space-y-8"></div>

  <!-- Formulario de publicación solo para creadora -->
  <form id="publish-form" onsubmit="return false;">
    <h3 class="text-center font-tech neon-text">Agregar nuevo secreto</h3>
    <input type="password" id="admin-pass" placeholder="Contraseña maestra">
    <input type="text" id="post-title" placeholder="Título del secreto" aria-label="Título">
    <textarea id="post-content" placeholder="Contenido del secreto" aria-label="Contenido"></textarea>
    <input type="text" id="post-confirm" placeholder="Confirmación/estado" aria-label="Confirmación">
    <button type="button" id="publish-btn">Publicar</button>
  </form>
</main>

</div>

<script>
// Atención: para producción NO guardes la contraseña en el cliente.
// Esto es solo para demo/local. Valida en servidor y usa HTTPS.
const DEMO_MASTER_PASS = 'ViperSecreta123'; // demo only

// Datos iniciales corregidos (timestamp como string)
let posts = [
  {
    id: 'post-001',
    code: '[VPR-2024-001]',
    title: 'FILTRACIÓN DE DATOS CORPORATIVOS',
    content: 'Se detectó una brecha exponiendo 2.3 millones de registros.',
    confirmation: 'Datos verificados',
    timestamp: '2024-07-01 // 12:34 UTC'
  }
];

// Escape simple para evitar XSS al inyectar textos del usuario
function escapeHTML(str) {
  if (typeof str !== 'string') return '';
  return str
    .replace(/&/g, '&amp;')
    .replace(/</g, '&lt;')
    .replace(/>/g, '&gt;')
    .replace(/"/g, '&quot;')
    .replace(/'/g, '&#039;');
}

function renderPosts() {
  const container = document.getElementById('posts-container');
  container.innerHTML = '';
  posts.forEach(p=>{
    const postEl = document.createElement('article');
    postEl.className='post-card neon-border p-6 md:p-8';
    // Usamos escapeHTML en los valores para evitar inyección
    postEl.innerHTML=`
      <div class="flex items-center justify-between mb-5">
        <span class="text-xs neon-text-dim font-mono">${escapeHTML(p.code)}</span>
        <span class="text-xs neon-text-dim font-mono">${escapeHTML(p.timestamp)}</span>
      </div>
      <h2 class="font-tech text-lg md:text-xl neon-text mb-5 font-bold tracking-wide">${escapeHTML(p.title)}</h2>
      <p class="text-sm md:text-base leading-relaxed mb-5 neon-text opacity-80">${escapeHTML(p.content)}</p>
      <p class="text-xs neon-text-dim mb-6 font-mono">&gt; ${escapeHTML(p.confirmation)}</p>
    `;
    container.appendChild(postEl);
  });
}

renderPosts();

// Publicar secreto (demo): valida contraseña localmente (solo demo)
document.getElementById('publish-btn').onclick = () => {
  const pass = document.getElementById('admin-pass').value;
  if(pass !== DEMO_MASTER_PASS){
    alert('Contraseña incorrecta. Acceso denegado.');
    return;
  }

  const title = document.getElementById('post-title').value.trim();
  const content = document.getElementById('post-content').value.trim();
  const confirm = document.getElementById('post-confirm').value.trim();

  if(!title || !content) { alert('Título y contenido son obligatorios'); return; }

  const newPost = {
    id: 'post-' + (posts.length + 1).toString().padStart(3,'0'),
    code: '[VPR-2026-' + (posts.length + 1).toString().padStart(3,'0') + ']',
    title,
    content,
    confirmation: confirm || 'Sin confirmación',
    timestamp: new Date().toISOString().replace('T',' // ').split('.')[0] + ' UTC'
  };

  posts.unshift(newPost);
  renderPosts();
  document.getElementById('post-title').value='';
  document.getElementById('post-content').value='';
  document.getElementById('post-confirm').value='';
  document.getElementById('admin-pass').value='';
};
</script>

</body>
</html>
